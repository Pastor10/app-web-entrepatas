<div class="card">
  <div class="card-body">

    <ngx-alerts></ngx-alerts>
    <div>


      <p-fieldset legend="Reporte de tickets internos, derivados, abandonados, reactivados">
        <div class="row">
          <div class="col-2" style="left: 40px">
            <div class="row">
              <label>Oficinas</label>
            </div>
            <div class="row">
              <p-multiSelect [options]="oficinas" [(ngModel)]="selectedOficinas" [panelStyle]="{minWidth:'24em'}"
                      defaultLabel="Selecciona oficina" (onChange)="onChange()"></p-multiSelect>
            </div>
            <br>
            <div class="row">
              <label>Periodo</label>
            </div>
            <div class="row">
              <p-dropdown [options]="periodos" [(ngModel)]="periodoSelected" 
                    placeholder="Periodo" optionLabel="name" (onChange)="onChange()"></p-dropdown>
            </div>
          </div>

          <div class="col-2" style="left: 40px">
            <div *ngIf="showFechaInicio">
              <label for="">{{labelFechaInicio}}</label>
              <p-calendar placeholder="Seleccione una fecha" (onSelect)="search()" (dateChange)="addEvent('change', $event)"
                      (dateInput)="addEvent('input', $event)" [(ngModel)]="dateInicioSelected" [locale]="es" dateFormat="dd/mm/yy"></p-calendar>
            </div>
            <hr>       
          
            <div *ngIf="showFechaFin">
              <label for="">{{labelFechaFin}}</label>
              <p-calendar placeholder="Seleccione una fecha" (onSelect)="search()" (dateChange)="addEvent('change', $event)"
                        (dateInput)="addEvent('input', $event)" [(ngModel)]="dateFinSelected" [locale]="es" dateFormat="dd/mm/yy"></p-calendar>
            </div>
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-2" style="left: 40px">
            <div class="row">
              <p>Oficinas: {{selectedOficinas}}</p>
            </div>
          </div>
        </div>
        <br>
      </p-fieldset>

      <table mdbTable class="table table-bordered" mdbTableScroll scrollX="true">
        <thead class="v">
          <tr>
            <th class="text-center h6">Periodo</th>
            <th class="text-center h6">Oficina</th>
            <th class="text-center h6">Tipo Ticket</th>
            <th class="text-center h6">Derivados</th>
            <th class="text-center h6">Reactivados</th>
            <th class="text-center h6">Internos</th>
            <th class="text-center h6">Abandonados</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let o of listItem">
            <td class="text-center p-1">{{o.periodo}}</td>
            <td class="text-center text-uppercase p-1">{{o.oficina}}</td>
            <td class="text-center text-uppercase p-1">{{o.tipoTicket}}</td>
            <td class="text-center p-1">{{o.derivados==undefined?0:o.derivados}}</td>
            <td class="text-center p-1">{{o.reactivados==undefined?0:o.reactivados}}</td>
            <td class="text-center p-1">{{o.internos==undefined?0:o.internos}}</td>
            <td class="text-center p-1">{{o.abandonados==undefined?0:o.abandonados}}</td>

          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

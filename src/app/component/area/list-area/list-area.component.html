<body>
    <div class="container">
        <div class="panel panel-primary">
            <div class="panel-body">
                <br/>
                <br/>
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Áreas</h3>
                        <ngx-alerts></ngx-alerts>

                        <div class="row centered">
                            <div *ngIf="!enableBtnBuscar" class="overlay centered" style="width: 100%;">
                                <div class="overlay-content centered">
                                    <div class="loader centered">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">

                            <div class="row">
                                <div class="col-md-12 mx-auto">

                                    <button type="button" class="btn btn-primary waves-light" (click)="loadCreate();"
                                        mdbWavesEffect [disabled]="!enableBtnBuscar">Crear</button>

                                    <div class="md-form">
                                        <input mdbInput placeholder="Buscar por nombre" type="text" [(ngModel)]="valueInput"
                                            [ngModelOptions]="{standalone: true}" (keydown)="enter($event)">
                                    </div>

                                    <table mdbTable class="table table-bordered" mdbTableScroll scrollX="true" maxWidth="auto" >
                                        <thead class="v">
                                            <tr>
                                                <th class="text-center h6">ID</th>
                                                <th class="h6">Nombre</th>
                                                <th class="h6">Descripción</th>
                                                <th class="h6"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let area of areas">
                                                <td class="text-center">{{area.idArea}}</td>
                                                <td class="text-uppercase">{{area.nombre}}</td>
                                                <td class="text-uppercase">{{area.descripcion}}</td>
                                                <td>

                                                    <li class="nav-item dropdown btn-group" dropdown>
                                                        <a dropdownToggle type="button" class="nav-link dropdown-toggle waves-light"
                                                            mdbWavesEffect>
                                                            Acciones
                                                        </a>
                                                        <div class="dropdown-menu dropdown-primary dropdown-menu-right"
                                                            role="menu">
                                                            <a class="dropdown-item" (click)="loadEdit(area.idArea);">Modificar</a>
                                                            <a class="dropdown-item" (click)="showConfirmDelete(area.idArea)">Borrar</a>
                                                        </div>
                                                    </li>

                                                </td>

                                            </tr>
                                        </tbody>
                                    </table>

    <!--Bottom Table UI-->
    <div class="d-flex justify-content-center">

            <!--Pagination -->
            <nav class="my-4 pt-2">
              <ul class="pagination pagination-circle pg-purple mb-0">
      
                <!--First-->
                <li class="page-item clearfix d-none d-md-block" (click)="firstPage()" [ngClass]="{disabled: activePage == 1}">
                  <a class="page-link">Inicio</a>
                </li>
      
                <!--Arrow left-->
                <li class="page-item" (click)="previousPage($event)" [ngClass]="{disabled: activePage == 1}">
                  <a class="page-link" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Anterior</span>
                  </a>
                </li>
      
                <!--Numbers-->
                <li #pages *ngFor="let page of paginators | slice:firstVisiblePaginator:lastVisiblePaginator; let i = index" class="page-item" [ngClass]="{active: i + firstVisiblePaginator + 1 == activePage}">
                    <a class="page-link waves-light" (click)="changePage($event)" mdbWavesEffect>{{page}}</a>
                </li>
          
                <!--Arrow right-->
                <li class="page-item" (click)="nextPage($event)" [ngClass]="{disabled: activePage == numberOfPaginators}">
                  <a class="page-link" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Siguiente</span>
                  </a>
                </li>
      
                <!--First-->
                <li class="page-item clearfix d-none d-md-block" (click)="lastPage()" [ngClass]="{disabled: activePage == numberOfPaginators}">
                  <a class="page-link">Fin</a>
                </li>
      
              </ul>
            </nav>
            <!--/Pagination -->
      
          </div>
          <!--Bottom Table UI-->
                                </div>
                            </div>

                        </div>


                        <!--Modal: Create Form-->
                        <div mdbModal #form="mdb-modal" class="modal fade" id="modalCrearArea" tabindex="-1" role="dialog"
                            aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="row centered">
                                <div *ngIf="!enableBtnBuscar" class="overlay centered" style="width: 100%;">
                                    <div class="overlay-content centered">
                                        <div class="loader centered">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-dialog " role="document"><!-- cascading-modal -->
                                <!--Content-->
                                <div class="modal-content">

                                    <!--Header-->
                                    <div class="modal-header light-blue darken-3 white-text">
                                        <h4 class="title">{{titleModal}}</h4>
                                        <button id="btnCerrar" type="button" class="close waves-effect waves-light"
                                            data-dismiss="modal" aria-label="Close" (click)="form.hide()">
                                            <span aria-hidden="true">×</span>
                                        </button>
                                    </div>
                                    <!--Body-->
                                    <div class="modal-body">
                                        <div class="md-form">
                                            <input mdbActive mdbInputDirective type="text" id="form30" class="form-control"
                                             [(ngModel)]="area.nombre">
                                            <label for="form30">Nombre</label>
                                        </div>

                                        <div class="md-form">
                                            <input mdbInputDirective type="text" id="form31" class="form-control" 
                                            [(ngModel)]="area.descripcion">
                                            <label for="form31">Descripción</label>
                                        </div>

                                    </div>
                                    <!--Footer-->
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary waves-light" data-dismiss="modal"
                                            (click)="save()" mdbWavesEffect [disabled]="!enableBtnGuardar">Guardar</button>
                                    </div>
                                </div>
                                <!--/.Content-->
                            </div>
                        </div>


                        <!-- start confirmModal-->
                        <div mdbModal #confirmDelete="mdb-modal" class="modal fade top" id="frameModalTop" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog modal-sm modal-notify modal-primary" role="document">
                          <!--Content-->
                          <div class="modal-content text-center">
                            <!--Header-->
                            <div class="modal-header d-flex justify-content-center">
                              <p class="heading">Seguro(a) que desea borrar esta fila?</p>
                            </div>
                      
                            <!--Body-->
                            <div class="modal-body">
                              <i class="fa fa-times fa-4x animated rotateIn"></i>
                            </div>
                      
                            <!--Footer-->
                            <div class="modal-footer flex-center">
                                    <button type="button" class="btn btn-danger waves-light" (click)="delete();"
                                    mdbWavesEffect [disabled]="!enableBtnBuscar">Borrar</button>
                                  <button type="button" class="btn btn-primary waves-light" (click)="confirmDelete.hide();"
                                        mdbWavesEffect [disabled]="!enableBtnBuscar">No</button>

                                        

                                        

                            </div>
                          </div>
                          <!--/.Content-->
                        </div>
                      </div>
                        <!-- end confirmModal-->

                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
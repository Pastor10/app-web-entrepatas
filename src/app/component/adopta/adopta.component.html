<p-toast key="tst" [style]="{marginTop: '70px'}"></p-toast>
<p-card>
    <div class="ui-g ui-fluid">

        <div class="ui-g-12">
            <div class="row justify-content-center">
                <h2 class="col-12 text-center titulo flipInY2">
                    ADOPTA Y SALVA DOS VIDAS
                </h2>


                <p-dataView #dv [value]="publicaciones" [paginator]="true" [rows]="16" filterBy="name"
                [sortField]="sortField" [sortOrder]="sortOrder" layout="grid">
                <ng-template pTemplate="header">
                    <div class="p-d-flex p-flex-column p-flex-md-row p-jc-md-between">
                        <p-dropdown [options]="sortOptions" [(ngModel)]="sortKey" placeholder="Sort By Price" (onChange)="onSortChange($event)" styleClass="p-mb-2 p-mb-md-0"></p-dropdown>
                        <span class="p-input-icon-left p-mb-2 p-mb-md-0">
                            <i class="pi pi-search"></i>
                            <input type="search" pInputText placeholder="Search by Name" (input)="dv.filter($event.target.value)">
                        </span>
                        <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
                    </div>
                </ng-template>
        
                <ng-template let-data pTemplate="gridItem">
                    

                    <div class="ui-g-12 ui-md-3 cont-tarjeta">
                        <div class='tarjeta'>
                        <p-panel [header]="data.animal.nombre" [style]="{'text-align':'center'}">
                            <img class='tamanio'src="{{data.animal.foto}}" 
                             (click)="getPublicacion($event, data)">
                            <!-- <div class="car-detail">{{data.animal.sexo}} </div> -->
                            <hr class="ui-widget-content" style="border-top:0;margin-bottom:15px;">
                            <span *ngIf="data.condicion.nombre=='ENCONTRADO'" class="label label-warning">
                                {{data.condicion.nombre}}
                            </span>
                            <span *ngIf="data.condicion.nombre=='PERDIDO'"  class="label label-danger">
                                {{data.condicion.nombre}}
                             </span>
                             <span  *ngIf="data.condicion.nombre=='ADOPCION'" class="label label-success">
                              {{data.condicion.nombre}}
                           </span>
                           <span  *ngIf="data.animal.sexo=='Macho'" class="label label-info">
                              {{data.animal.sexo}}
                           </span>
                           <span  *ngIf="data.animal.sexo=='Hembra'" class="label label-pinki">
                              {{data.animal.sexo}}
                           </span>
                        </p-panel>
                        </div>
                    </div>
                </ng-template>
            </p-dataView>
                <p-dialog header="Hola, Gracias por considerarme" [(visible)]="displayDialog" [style]="{width: '50vw'}"
                    [baseZIndex]="10000" [responsive]="true">
                    <div class="ui-g" *ngIf="selectPublicacion">
                        <div class=" ui-g-12 ui-md-4">
                            <div class="ui-g-12" style="text-align:center">
                                <img src="{{selectPublicacion.animal.foto}}"
                                    width="200px" height="250px">
                            </div>
                        </div>
                        <div class=" ui-g-12 ui-md-8">
                            <p-tabView>
                                <p-tabPanel header="Datos Mascota" leftIcon="fa fa-info-circle">
                                    <div class="ui-g-4">Nombre: </div>
                                    <div class="ui-g-8">{{selectPublicacion.animal.nombre}}</div>

                                    <div class="ui-g-4">Edad: </div>
                                    <div class="ui-g-8">{{selectPublicacion.animal.edad}}</div>

                                    <div class="ui-g-4">Raza: </div>
                                    <div class="ui-g-8">{{selectPublicacion.animal.raza.nombre}}</div>

                                    <div class="ui-g-4">sexo: </div>
                                    <div class="ui-g-8">{{selectPublicacion.animal.sexo}}</div>

                                    <div class="ui-g-4">Tamaño: </div>
                                    <div class="ui-g-8">{{selectPublicacion.animal.tamanoAnimal.nombre}}</div>
                
                                </p-tabPanel>
                                <p-tabPanel header="Solicitar adopción" leftIcon="fa fa-file-text-o" *ngIf="selectPublicacion.condicion.nombre=='ADOPCION'">
                                    <div class="ui-g ui-fluid">
                                        <div class=" ui-g-12 ui-md-12">
                                            <p-card>
                                                <div class="ui-g">
                                                    <div class="ui-g-6" >
                                                        <h5 class="label-custom">Tipo Documento (*)</h5>

                                                        <p-autoComplete [(ngModel)]="tipoDocumento" [suggestions]="listTipoDocumento"
                                                        field="abreviatura" name="perfilSelected" [size]="15"
                                                        (completeMethod)="filterListTipoDocumento($event)" [minLength]="1"
                                                        placeholder="Seleccione tipo documento" [dropdown]="true" [readonly]="true">
                                
                                                    </p-autoComplete>
                                                    </div>
                                                    <div class="ui-g-6">
                                                        <h5 class="label-custom">Documento (*) [PRESS ENTER]</h5>
                                                        <input style="width: 100%;" type="text" name="documento"
                                                            [(ngModel)]="documento" (keydown.enter)="getPersona()" [textMask]="{mask: numberMask}" pInputText />

                                                    </div>

                                                    <div class="ui-g-4">
                                                        <h5 class="label-custom">Nombres (*)</h5>
                                                        <input style="width: 100%;" type="text" name="nombres"
                                                            [(ngModel)]="nombres" pInputText />

                                                    </div>
                                                    <div class="ui-g-4">
                                                        <h5 class="label-custom">Apellido Paterno (*)</h5>
                                                        <input style="width: 100%;" type="text" name="apePaterno"
                                                            [(ngModel)]="apePaterno" pInputText />

                                                    </div>
                                                    <div class="ui-g-4">
                                                        <h5 class="label-custom">Apellido Materno (*)</h5>
                                                        <input style="width: 100%;" type="text" name="apeMaterno"
                                                            [(ngModel)]="apeMaterno" pInputText />

                                                    </div>

                                                    <div class="ui-g-6">
                                                        <h5 class="label-custom">Email (*)</h5>
                                                        <input style="width: 100%;" type="text" name="email"
                                                            [(ngModel)]="email" pInputText />

                                                    </div>
                                                    <div class="ui-g-6">
                                                        <h5 class="label-custom">Ciudad (*)</h5>
                                                        <p-autoComplete field="descripcion" [(ngModel)]="ubigeo"
                                                            name="ubigeo" [suggestions]="filteredCities"
                                                            (completeMethod)="filterCitiesByNombre($event)" [size]="40"
                                                            placeholder="Ingrese ubigeo" [minLength]="1">
                                                            <ng-template let-d pTemplate="item">
                                                                {{d.codDepartamento}}{{d.codProvincia}}{{d.codDistrito}}
                                                                - {{d.descripcion}}
                                                            </ng-template>
                                                        </p-autoComplete>
                                                    </div>
                                                    <div class="ui-g-6">
                                                        <h5 class="label-custom">Dirección (*)</h5>
                                                        <input style="width: 100%;" type="text" name="direccion"
                                                            [(ngModel)]="direccion" pInputText />

                                                    </div>
                                                    <div class="ui-g-6">
                                                        <h5 class="label-custom">Celular </h5>
                                                        <input style="width: 100%;" type="text" name="celular"
                                                            [(ngModel)]="celular" [textMask]="{mask: numberMask}" pInputText />

                                                    </div>

                                                    <div class="ui-g-12" text-align: center style="text-align: center;">
                                                        <button
                                                            style="width: auto; margin-top: 1.2rem;  font-size: 15px;"
                                                            pButton label="Enviar Solicitud" (click)="save()"
                                                            class="ui-button-rounded ui-button-success"></button>

                                                    </div>


                                                </div>

                                            </p-card>
                                        </div>

                                    </div>
                                </p-tabPanel>
                                <p-tabPanel header="Información del contacto" leftIcon="fa fa-file-text-o" *ngIf="selectPublicacion.condicion.nombre!='ADOPCION'">
                                    <div class="ui-g ui-fluid">
                                        <div class=" ui-g-12 ui-md-12">
                                            <div class="ui-g-4">Contacto: </div>
                                            <div class="ui-g-8">{{selectPublicacion.usuarioPublica.persona.nombreCompleto}}</div>
        
                                            <div class="ui-g-4">Celular: </div>
                                            <div class="ui-g-8">{{selectPublicacion.usuarioPublica.persona.celular}}</div>
        
                                            <div class="ui-g-4">Correo: </div>
                                            <div class="ui-g-8">{{selectPublicacion.usuarioPublica.persona.correo}}</div>
                                        </div>

                                    </div>
                                </p-tabPanel>

                            </p-tabView>

                        </div>


                    </div>
                    <p-footer>
                        <button type="button" pButton icon="pi pi-times"  label="Cerrar"
                            class="ui-button-secondary" (click)="limpiarData()"></button>
                    </p-footer>
                </p-dialog>
            </div>

        </div>

        <app-pagina-interes></app-pagina-interes>
    </div>
</p-card>